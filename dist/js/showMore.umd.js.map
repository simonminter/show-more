{"version":3,"file":"showMore.umd.js","sources":["../../sources/utils/function.js","../../sources/utils/regex.js","../../sources/index.js"],"sourcesContent":["/**\r\n * Get hidden element\r\n *\r\n * @param {object} object\r\n * @param {String} type - type of element table | div\r\n * @returns\r\n */\r\nfunction getNumber({ rows, children }, type) {\r\n  const elementType = type === 'table' ? rows : children;\r\n\r\n  const numbersElementHidden = [].slice\r\n    .call(elementType)\r\n    .filter((el) => el.className === 'hidden').length;\r\n  return numbersElementHidden !== 0 ? ` ${numbersElementHidden}` : '';\r\n}\r\n\r\n// https://stackoverflow.com/questions/6003271/substring-text-with-html-tags-in-javascript\r\n/**\r\n * Substring text width html tags\r\n *\r\n * @param {String} originalText - text with html tags\r\n * @param {String} count - limit of characters\r\n * @returns\r\n */\r\nfunction htmlSubstr(originalText, count) {\r\n  let div = document.createElement('div');\r\n  div.innerHTML = originalText;\r\n\r\n  walk(div, track);\r\n\r\n  function track(el) {\r\n    if (count > 0) {\r\n      let len = el.data.length;\r\n      count -= len;\r\n      if (count <= 0) {\r\n        el.data = el.substringData(0, el.data.length + count);\r\n      }\r\n    } else {\r\n      el.data = '';\r\n    }\r\n  }\r\n\r\n  function walk(el, fn) {\r\n    let node = el.firstChild;\r\n    do {\r\n      if (node.nodeType === 3) {\r\n        fn(node);\r\n      } else if (node.nodeType === 1 && node.childNodes && node.childNodes[0]) {\r\n        walk(node, fn);\r\n      }\r\n    } while ((node = node.nextSibling));\r\n  }\r\n  return div.innerHTML;\r\n}\r\n\r\n/**\r\n * Add/remove class 'hidden' to element\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} type - type of element add or remove\r\n */\r\nfunction addRemoveClass(element, type = false) {\r\n  element.classList[type ? 'add' : 'remove']('hidden');\r\n}\r\n\r\nexport { addRemoveClass, getNumber, htmlSubstr };\r\n","/**\r\n * Default regexes for validation\r\n */\r\nconst defaultRegex = {\r\n  newLine: {\r\n    match: /(\\r\\n|\\n|\\r)/gm,\r\n    replace: '',\r\n  },\r\n  space: {\r\n    match: /\\s\\s+/gm,\r\n    replace: ' ',\r\n  },\r\n  br: {\r\n    match: /<br\\s*\\/?>/gim,\r\n    replace: '',\r\n  },\r\n  html: {\r\n    match: /(<((?!b|\\/b|!strong|\\/strong)[^>]+)>)/gi,\r\n    replace: '',\r\n  },\r\n};\r\n\r\nexport default defaultRegex;\r\n","import { addRemoveClass, getNumber, htmlSubstr } from './utils/function';\r\nimport defaultRegex from './utils/regex';\r\n\r\n/**\r\n * @class ShowMore\r\n */\r\nexport default class ShowMore {\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {HTMLElement} className\r\n   * @param {Object} object\r\n   */\r\n  constructor(className, { onMoreLess = () => {}, regex = {}, config } = {}) {\r\n    // all html elements\r\n    const elements = document.querySelectorAll(className);\r\n\r\n    // colback function\r\n    this.onMoreLess = onMoreLess;\r\n\r\n    // global regex\r\n    this.regex = Object.assign(defaultRegex, regex);\r\n\r\n    for (let i = 0; i < elements.length; i++) {\r\n      const {\r\n        type,\r\n        limit,\r\n        element,\r\n        after,\r\n        more,\r\n        less,\r\n        number,\r\n        ellipsis,\r\n        btnClass,\r\n        btnClassAppend,\r\n      } = JSON.parse(elements[i].getAttribute('data-config')) || config;\r\n\r\n      // create global object\r\n      this.object = {\r\n        index: i,\r\n        element: elements[i],\r\n        type,\r\n        limit,\r\n        classArray: elements[i].classList,\r\n        ellipsis,\r\n        typeElement: element || 'span',\r\n        more: more || false,\r\n        less: less || false,\r\n        number: number || false,\r\n        after: after || 0,\r\n        btnClass: btnClass || 'show-more-btn',\r\n        btnClassAppend: btnClassAppend || null,\r\n      };\r\n\r\n      this.initial(this.object);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initail function\r\n   *\r\n   * @param {Object} object\r\n   */\r\n  initial({ element, after, ellipsis, limit, type }) {\r\n    // set default aria-expande to false\r\n    element.setAttribute('aria-expanded', 'false');\r\n\r\n    const limitCounts = limit + after;\r\n    const ellips = ellipsis === false ? '' : '...';\r\n\r\n    // text\r\n    if (type === 'text') {\r\n      let truncatedText = '';\r\n      const originalText = element.innerHTML.trim();\r\n      let elementText = element.textContent.trim();\r\n\r\n      let orgTexReg = originalText;\r\n      for (let key in this.regex) {\r\n        const { match, replace } = this.regex[key];\r\n        if (key && match) orgTexReg = orgTexReg.replace(match, replace);\r\n      }\r\n\r\n      if (elementText.length > limitCounts) {\r\n        truncatedText = htmlSubstr(orgTexReg, limit).concat(ellips);\r\n\r\n        element.innerHTML = truncatedText;\r\n\r\n        this.addBtn(this.object);\r\n\r\n        this.clickEvent(element, {\r\n          ...this.object,\r\n          originalText,\r\n          truncatedText,\r\n        });\r\n      }\r\n    }\r\n\r\n    // list and table\r\n    if (type === 'list' || type === 'table') {\r\n      const items =\r\n        type === 'list' ? [].slice.call(element.children) : element.rows;\r\n\r\n      if (items.length > limitCounts) {\r\n        for (let i = limit; i < items.length; i++) {\r\n          addRemoveClass(items[i], true);\r\n        }\r\n\r\n        // add button to the list and table\r\n        this.addBtn(this.object);\r\n\r\n        // add event click\r\n        this.clickEvent(\r\n          type === 'list' ? element : element.nextElementSibling,\r\n          this.object\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event click\r\n   *\r\n   * @param {HTMLElement} element\r\n   * @param {Object} object\r\n   */\r\n  clickEvent(element, object) {\r\n    element.addEventListener('click', this.handleEvent.bind(this, object));\r\n  }\r\n\r\n  /**\r\n   * Create button\r\n   *\r\n   * @param {Object} object\r\n   * @returns HTMLElement\r\n   */\r\n  createBtn({ element, number, less, more, type, btnClass, btnClassAppend }) {\r\n    const typeAria = this.checkExp ? less || '' : more || '';\r\n    const label = this.checkExp ? 'collapse' : 'expand';\r\n    const expanded = this.checkExp ? true : false;\r\n\r\n    const btn = document.createElement('button');\r\n    btn.className =\r\n      btnClassAppend == null ? btnClass : btnClass + ' ' + btnClassAppend;\r\n    btn.setAttribute('aria-expanded', expanded);\r\n    btn.setAttribute('aria-label', label);\r\n    btn.setAttribute('tabindex', 0);\r\n    btn.innerHTML = number ? typeAria + getNumber(element, type) : typeAria;\r\n    return btn;\r\n  }\r\n\r\n  /**\r\n   * Event handler\r\n   *\r\n   * @param {Object} object\r\n   * @param {Event} event\r\n   */\r\n  handleEvent(object, { currentTarget, target }) {\r\n    const {\r\n      element,\r\n      type,\r\n      limit,\r\n      less,\r\n      typeElement,\r\n      originalText,\r\n      truncatedText,\r\n      btnClass,\r\n    } = object;\r\n\r\n    // check if the button is clicked\r\n    const checkContainsClass = target.classList.contains(btnClass);\r\n\r\n    if (!checkContainsClass) return;\r\n\r\n    const ariaExpanded = element.getAttribute('aria-expanded');\r\n    this.checkExp = ariaExpanded === 'false';\r\n\r\n    // --------------------------------------------------\r\n    // text\r\n    if (type === 'text' && checkContainsClass) {\r\n      element.innerHTML = '';\r\n      element.innerHTML = this.checkExp ? originalText : truncatedText;\r\n\r\n      if (less) {\r\n        const el = document.createElement(typeElement);\r\n        el.insertAdjacentElement('beforeend', this.createBtn(object));\r\n        element.appendChild(el);\r\n      }\r\n    }\r\n\r\n    // --------------------------------------------------\r\n    // list and table\r\n    if (type === 'list' || type === 'table') {\r\n      const items =\r\n        type === 'list' ? [].slice.call(currentTarget.children) : element.rows;\r\n\r\n      for (let i = 0; i < items.length; i++) {\r\n        const typeRemove =\r\n          type === 'list' ? i >= limit && i < items.length - 1 : i >= limit;\r\n\r\n        if (ariaExpanded === 'false') {\r\n          addRemoveClass(items[i]);\r\n        } else if (typeRemove) {\r\n          addRemoveClass(items[i], true);\r\n        }\r\n      }\r\n    }\r\n\r\n    // set aria-expanded\r\n    if (type === 'table' || type === 'list' || type === 'text') {\r\n      this.setExpand({ ...object, target });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add button\r\n   *\r\n   * @param {Object} object\r\n   */\r\n  addBtn(object) {\r\n    const { type, element, more, typeElement } = object;\r\n\r\n    if (!more) return;\r\n\r\n    if (type === 'table') {\r\n      element.insertAdjacentElement('afterend', this.createBtn(object));\r\n    } else {\r\n      const el = document.createElement(typeElement);\r\n      el.appendChild(this.createBtn(object));\r\n      element.appendChild(el);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set aria-expanded\r\n   *\r\n   * @param {Object} object\r\n   */\r\n  setExpand(object) {\r\n    const { element, type, less, more, number, target } = object;\r\n\r\n    const check = this.checkExp;\r\n\r\n    const typeAria = check ? less : more;\r\n    const aria = check ? 'expand' : 'collapse';\r\n    const ariaText = type === 'table' ? type : `the ${type}`;\r\n    const lastChild = element.lastElementChild;\r\n\r\n    element.setAttribute('aria-expanded', check);\r\n    target.setAttribute('aria-expanded', check);\r\n    target.setAttribute('aria-label', `${aria} ${ariaText}`);\r\n\r\n    // callback function on more/less\r\n    this.onMoreLess(aria, object);\r\n\r\n    if (typeAria) {\r\n      target.innerHTML = number\r\n        ? typeAria + getNumber(element, type)\r\n        : typeAria;\r\n    } else if (type === 'table') {\r\n      target.parentNode.removeChild(target);\r\n    } else if (type === 'list') {\r\n      lastChild.parentNode.removeChild(lastChild);\r\n    }\r\n  }\r\n}\r\n"],"names":["getNumber","type","rows","children","elementType","numbersElementHidden","slice","call","filter","el","className","length","htmlSubstr","originalText","count","div","document","createElement","innerHTML","walk","track","len","data","substringData","fn","node","firstChild","nodeType","childNodes","nextSibling","addRemoveClass","element","classList","defaultRegex","newLine","match","replace","space","br","html","ShowMore","constructor","onMoreLess","regex","config","elements","querySelectorAll","Object","assign","i","limit","after","more","less","number","ellipsis","btnClass","btnClassAppend","JSON","parse","getAttribute","object","index","classArray","typeElement","initial","setAttribute","limitCounts","ellips","truncatedText","trim","elementText","textContent","orgTexReg","key","concat","addBtn","clickEvent","items","nextElementSibling","addEventListener","handleEvent","bind","createBtn","typeAria","checkExp","label","expanded","btn","currentTarget","target","checkContainsClass","contains","ariaExpanded","insertAdjacentElement","appendChild","typeRemove","setExpand","check","aria","ariaText","lastChild","lastElementChild","parentNode","removeChild"],"mappings":"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"}