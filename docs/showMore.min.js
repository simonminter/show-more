var ShowMore=function(){"use strict";function e(e,t){let{rows:n,children:s}=e;const i="table"===t?n:s,l=[].slice.call(i).filter(e=>"hidden"===e.className).length;return 0!==l?" "+l:""}function t(e,t){void 0===t&&(t=!1),e.classList[t?"add":"remove"]("hidden")}const n={newLine:{match:/(\r\n|\n|\r)/gm,replace:""},space:{match:/\s\s+/gm,replace:" "},br:{match:/<br\s*\/?>/gim,replace:""},html:{match:/(<((?!b|\/b|!strong|\/strong)[^>]+)>)/gi,replace:""}};return class{constructor(e,t){let{onMoreLess:s=(()=>{}),regex:i={},config:l}=void 0===t?{}:t;const a=document.querySelectorAll(e);this.onMoreLess=s,this.regex=Object.assign(n,i);for(let e=0;e<a.length;e++){const{type:t,limit:n,element:s,after:i,more:r,less:c,number:o,ellipsis:d,btnClass:h,btnClassAppend:p}=JSON.parse(a[e].getAttribute("data-config"))||l;this.object={index:e,element:a[e],type:t,limit:n,classArray:a[e].classList,ellipsis:d,typeElement:s||"span",more:r||!1,less:c||!1,number:o||!1,after:i||0,btnClass:h||"show-more-btn",btnClassAppend:p||null},this.initial(this.object)}}initial(e){let{element:n,after:s,ellipsis:i,limit:l,type:a}=e;n.setAttribute("aria-expanded","false");const r=l+s,c=!1===i?"":"...";if("text"===a){let e="";const t=n.innerHTML.trim();let s=n.textContent.trim(),i=t;for(let e in this.regex){const{match:t,replace:n}=this.regex[e];e&&t&&(i=i.replace(t,n))}s.length>r&&(e=function(e,t){let n=document.createElement("div");return n.innerHTML=e,function e(t,n){let s=t.firstChild;do{3===s.nodeType?n(s):1===s.nodeType&&s.childNodes&&s.childNodes[0]&&e(s,n)}while(s=s.nextSibling)}(n,(function(e){if(t>0){let n=e.data.length;(t-=n)<=0&&(e.data=e.substringData(0,e.data.length+t))}else e.data=""})),n.innerHTML}(i,l).concat(c),n.innerHTML=e,this.addBtn(this.object),this.clickEvent(n,{...this.object,originalText:t,truncatedText:e}))}if("list"===a||"table"===a){const e="list"===a?[].slice.call(n.children):n.rows;if(e.length>r){for(let n=l;n<e.length;n++)t(e[n],!0);this.addBtn(this.object),this.clickEvent("list"===a?n:n.nextElementSibling,this.object)}}}clickEvent(e,t){e.addEventListener("click",this.handleEvent.bind(this,t))}createBtn(t){let{element:n,number:s,less:i,more:l,type:a,btnClass:r,btnClassAppend:c}=t;const o=this.checkExp?i||"":l||"",d=this.checkExp?"collapse":"expand",h=!!this.checkExp,p=document.createElement("button");return p.className=null==c?r:r+" "+c,p.setAttribute("aria-expanded",h),p.setAttribute("aria-label",d),p.setAttribute("tabindex",0),p.innerHTML=s?o+e(n,a):o,p}handleEvent(e,n){let{currentTarget:s,target:i}=n;const{element:l,type:a,limit:r,less:c,typeElement:o,originalText:d,truncatedText:h,btnClass:p}=e,m=i.classList.contains(p);if(!m)return;const b=l.getAttribute("aria-expanded");if(this.checkExp="false"===b,"text"===a&&m&&(l.innerHTML="",l.innerHTML=this.checkExp?d:h,c)){const t=document.createElement(o);t.insertAdjacentElement("beforeend",this.createBtn(e)),l.appendChild(t)}if("list"===a||"table"===a){const e="list"===a?[].slice.call(s.children):l.rows;for(let n=0;n<e.length;n++){const s="list"===a?n>=r&&n<e.length-1:n>=r;"false"===b?t(e[n]):s&&t(e[n],!0)}}"table"!==a&&"list"!==a&&"text"!==a||this.setExpand({...e,target:i})}addBtn(e){const{type:t,element:n,more:s,typeElement:i}=e;if(s)if("table"===t)n.insertAdjacentElement("afterend",this.createBtn(e));else{const t=document.createElement(i);t.appendChild(this.createBtn(e)),n.appendChild(t)}}setExpand(t){const{element:n,type:s,less:i,more:l,number:a,target:r}=t,c=this.checkExp,o=c?i:l,d=c?"expand":"collapse",h="table"===s?s:"the "+s,p=n.lastElementChild;n.setAttribute("aria-expanded",c),r.setAttribute("aria-expanded",c),r.setAttribute("aria-label",d+" "+h),this.onMoreLess(d,t),o?r.innerHTML=a?o+e(n,s):o:"table"===s?r.parentNode.removeChild(r):"list"===s&&p.parentNode.removeChild(p)}}}();
//# sourceMappingURL=showMore.min.js.map
