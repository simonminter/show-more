var ShowMore=function(){"use strict";function e(e,t){var n=e.rows,i=e.children,a="table"===t?n:i,r=[].slice.call(a).filter((function(e){return"hidden"===e.className})).length;return 0!==r?" "+r:""}function t(e,t){void 0===t&&(t=!1),e.classList[t?"add":"remove"]("hidden")}var n={newLine:{match:/(\r\n|\n|\r)/gm,replace:""},space:{match:/\s\s+/gm,replace:" "},br:{match:/<br\s*\/?>/gim,replace:""},html:{match:/(<((?!b|\/b|!strong|\/strong)[^>]+)>)/gi,replace:""}};return function(){function i(e,t){var i=void 0===t?{}:t,a=i.onMoreLess,r=void 0===a?function(){}:a,l=i.regex,s=void 0===l?{}:l,c=i.config,d=document.querySelectorAll(e);this.onMoreLess=r,this.regex=Object.assign(n,s);for(var o=0;o<d.length;o++){var h=JSON.parse(d[o].getAttribute("data-config"))||c,p=h.type,m=h.limit,b=h.element,u=h.after,f=h.more,v=h.less,g=h.number,x=h.ellipsis,E=h.btnClass,L=h.btnClassAppend;this.object={index:o,element:d[o],type:p,limit:m,classArray:d[o].classList,ellipsis:x,typeElement:b||"span",more:f||!1,less:v||!1,number:g||!1,after:u||0,btnClass:E||"show-more-btn",btnClassAppend:L||null},this.initial(this.object)}}var a=i.prototype;return a.initial=function(e){var n=e.element,i=e.after,a=e.ellipsis,r=e.limit,l=e.type;n.ariaExpanded=!1;var s=r+i,c=!1===a?"":"...";if("text"===l){var d="",o=n.innerHTML.trim(),h=n.textContent.trim(),p=o;for(var m in this.regex){var b=this.regex[m],u=b.match,f=b.replace;m&&u&&(p=p.replace(u,f))}h.length>s&&(d=function(e,t){var n=document.createElement("div");return n.innerHTML=e,function e(t,n){var i=t.firstChild;do{3===i.nodeType?n(i):1===i.nodeType&&i.childNodes&&i.childNodes[0]&&e(i,n)}while(i=i.nextSibling)}(n,(function(e){if(t>0){var n=e.data.length;(t-=n)<=0&&(e.data=e.substringData(0,e.data.length+t))}else e.data=""})),n.innerHTML}(p,r).concat(c),n.innerHTML=d,this.addBtn(this.object),this.clickEvent(n,Object.assign({},this.object,{originalText:o,truncatedText:d})))}if("list"===l||"table"===l){var v="list"===l?[].slice.call(n.children):n.rows;if(v.length>s){for(var g=r;g<v.length;g++)t(v[g],!0);this.addBtn(this.object),this.clickEvent("list"===l?n:n.nextElementSibling,this.object)}}},a.clickEvent=function(e,t){e.addEventListener("click",this.handleEvent.bind(this,t))},a.createBtn=function(t){var n=t.element,i=t.number,a=t.less,r=t.more,l=t.type,s=t.btnClass,c=t.btnClassAppend,d=this.checkExp?a||"":r||"",o=this.checkExp?"collapse":"expand",h=!!this.checkExp,p=document.createElement("button");return p.className=null==c?s:s+" "+c,p.ariaExpanded=h,p.ariaLabel=o,p.tabindex=0,p.innerHTML=i?d+e(n,l):d,p},a.handleEvent=function(e,n){var i=n.currentTarget,a=n.target,r=e.element,l=e.type,s=e.limit,c=e.less,d=e.typeElement,o=e.originalText,h=e.truncatedText,p=e.btnClass,m=a.classList.contains(p);if(m){var b=r.getAttribute("aria-expanded");if(this.checkExp="false"===b,"text"===l&&m&&(r.innerHTML="",r.innerHTML=this.checkExp?o:h,c)){var u=document.createElement(d);u.insertAdjacentElement("beforeend",this.createBtn(e)),r.appendChild(u)}if("list"===l||"table"===l)for(var f="list"===l?[].slice.call(i.children):r.rows,v=0;v<f.length;v++){var g="list"===l?v>=s&&v<f.length-1:v>=s;"false"===b?t(f[v]):g&&t(f[v],!0)}"table"!==l&&"list"!==l&&"text"!==l||this.setExpand(Object.assign({},e,{target:a}))}},a.addBtn=function(e){var t=e.type,n=e.element,i=e.more,a=e.typeElement;if(i)if("table"===t)n.insertAdjacentElement("afterend",this.createBtn(e));else{var r=document.createElement(a);r.appendChild(this.createBtn(e)),n.appendChild(r)}},a.setExpand=function(t){var n=t.element,i=t.type,a=t.less,r=t.more,l=t.number,s=t.target,c=this.checkExp,d=c?a:r,o=c?"expand":"collapse",h="table"===i?i:"the "+i,p=n.lastElementChild;n.ariaExpanded=c,s.ariaExpanded=c,s.ariaLabel=o+" "+h,this.onMoreLess(o,t),d?s.innerHTML=l?d+e(n,i):d:"table"===i?s.parentNode.removeChild(s):"list"===i&&p.parentNode.removeChild(p)},i}()}();
