var ShowMore=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.show,r=n.type,s=n.more,a=n.less;this.className=".".concat(e.class),this.type=r||"span",this.more=s,this.more=a,this.showMore=' <span class="showMore">'.concat(s,"</span>"),this.showLess=' <span class="showLess">'.concat(a,"</span>"),this.render()}var n,r,s;return n=t,(r=[{key:"render",value:function(){for(var e=document.querySelectorAll(this.className),t=0;t<e.length;t++){var n=Number(e[t].getAttribute("data-number"));switch(e[t].getAttribute("data-type")){case"text":this.showMoreText(e[t],n);break;case"list":this.showMoreList(e[t],n);break;case"table":this.showMoreTable(e[t],n)}}}},{key:"showMoreText",value:function(e,t){var n=e.innerHTML,r="",s=n.replace(/(\r\n|\n|\r)/gm,"").length-e.innerText.replace(/(\r\n|\n|\r)/gm,"").length;if(n.length>t){r=(r=n.substr(0,t+s)).substr(0,Math.min(r.length,r.lastIndexOf(" "))),e.innerHTML=r;var a=this.createElement(this.type);a.insertAdjacentHTML("beforeend",this.showMore),e.appendChild(a),this.appendControlsText(e,n,r)}}},{key:"appendControlsText",value:function(e,t,n){var r=this;e.addEventListener("click",(function(e){var s=e.target.className;if("showMore"===s||"showLess"===s){e.currentTarget.innerHTML="",e.currentTarget.innerHTML="showMore"===s?t:n.replace(/(\r\n|\n|\r)/gm,"");var a=document.createElement(r.type);a.insertAdjacentHTML("beforeend","showMore"===s?r.showLess:r.showMore),e.currentTarget.appendChild(a)}}))}},{key:"showMoreList",value:function(e,t){var n=[].slice.call(e.children);if(n.length>t){for(var r=0;r<n.length;r++)r>=t&&n[r].classList.add("hidden");var s=this.createElement(this.type);s.insertAdjacentHTML("beforeend",this.showMore),e.appendChild(s),this.appendControlList(e,t)}}},{key:"appendControlList",value:function(e,t){var n=this;e.addEventListener("click",(function(r){var s=r.target.className;if("showMore"===s||"showLess"===s){e.classList.toggle("is-open");for(var a=r.currentTarget.classList.contains("is-open"),o=[].slice.call(r.currentTarget.children),i=0;i<o.length;i++)a?o[i].classList.remove("hidden"):i>=t&&i<o.length-1&&o[i].classList.add("hidden");var l=o[o.length-1];l.parentNode.removeChild(l);var h=n.createElement(n.type);h.insertAdjacentHTML("beforeend",a?n.showLess:n.showMore),e.appendChild(h)}}))}},{key:"showMoreTable",value:function(e,t){var n=e.tBodies[0].rows;if(n.length>t){for(var r=0;r<n.length;r++)r>=t&&n[r].classList.add("hidden");var s=this.createElement("tfoot"),a=this.createElement("tr"),o=this.createElement("th");s.appendChild(a),o.colSpan=this.getTableColumnCount(e),a.appendChild(o),o.insertAdjacentHTML("beforeend",this.showMore),e.appendChild(s)}this.appendControlsTable(e,t)}},{key:"appendControlsTable",value:function(e,t){var n=this;e.addEventListener("click",(function(r){var s=r.target.className,a=e.tBodies[0].rows;if("showMore"===s){r.target.innerHTML="";for(var o=0;o<a.length;o++)a[o].classList.remove("hidden");r.target.insertAdjacentHTML("beforeend",n.showLess)}if("showLess"===s){r.target.innerHTML="";for(var i=0;i<a.length;i++)i>=t&&a[i].classList.add("hidden");r.target.insertAdjacentHTML("beforeend",n.showMore)}}))}},{key:"createElement",value:function(e){return document.createElement(e)}},{key:"getTableColumnCount",value:function(e){var t=0,n=e.rows;if(n.length>0)for(var r=n[0].cells,s=0,a=r.length;s<a;++s)t+=r[s].colSpan;return t}}])&&e(n.prototype,r),s&&e(n,s),t}()}();
