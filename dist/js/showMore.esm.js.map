{"version":3,"file":"showMore.esm.js","sources":["../../sources/utils/function.js","../../sources/utils/regex.js","../../sources/index.js"],"sourcesContent":["/**\r\n * Get hidden element\r\n *\r\n * @param {object} object\r\n * @param {String} type - type of element table | div\r\n * @returns\r\n */\r\nfunction getNumber({ rows, children }, type) {\r\n  const elementType = type === 'table' ? rows : children;\r\n\r\n  const numbersElementHidden = [].slice\r\n    .call(elementType)\r\n    .filter((el) => el.className === 'hidden').length;\r\n  return numbersElementHidden !== 0 ? ` ${numbersElementHidden}` : '';\r\n}\r\n\r\n// https://stackoverflow.com/questions/6003271/substring-text-with-html-tags-in-javascript\r\n/**\r\n * Substring text width html tags\r\n *\r\n * @param {String} originalText - text with html tags\r\n * @param {String} count - limit of characters\r\n * @returns\r\n */\r\nfunction htmlSubstr(originalText, count) {\r\n  let div = document.createElement('div');\r\n  div.innerHTML = originalText;\r\n\r\n  walk(div, track);\r\n\r\n  function track(el) {\r\n    if (count > 0) {\r\n      let len = el.data.length;\r\n      count -= len;\r\n      if (count <= 0) {\r\n        el.data = el.substringData(0, el.data.length + count);\r\n      }\r\n    } else {\r\n      el.data = '';\r\n    }\r\n  }\r\n\r\n  function walk(el, fn) {\r\n    let node = el.firstChild;\r\n    do {\r\n      if (node.nodeType === 3) {\r\n        fn(node);\r\n      } else if (node.nodeType === 1 && node.childNodes && node.childNodes[0]) {\r\n        walk(node, fn);\r\n      }\r\n    } while ((node = node.nextSibling));\r\n  }\r\n  return div.innerHTML;\r\n}\r\n\r\n/**\r\n * Add/remove class 'hidden' to element\r\n *\r\n * @param {HTMLElement} element\r\n * @param {String} type - type of element add or remove\r\n */\r\nfunction addRemoveClass(element, type = false) {\r\n  element.classList[type ? 'add' : 'remove']('hidden');\r\n}\r\n\r\nexport { addRemoveClass, getNumber, htmlSubstr };\r\n","/**\r\n * Default regexes for validation\r\n */\r\nconst defaultRegex = {\r\n  newLine: {\r\n    match: /(\\r\\n|\\n|\\r)/gm,\r\n    replace: '',\r\n  },\r\n  space: {\r\n    match: /\\s\\s+/gm,\r\n    replace: ' ',\r\n  },\r\n  br: {\r\n    match: /<br\\s*\\/?>/gim,\r\n    replace: '',\r\n  },\r\n  html: {\r\n    match: /(<((?!b|\\/b|!strong|\\/strong)[^>]+)>)/gi,\r\n    replace: '',\r\n  },\r\n};\r\n\r\nexport default defaultRegex;\r\n","import { addRemoveClass, getNumber, htmlSubstr } from './utils/function';\r\nimport defaultRegex from './utils/regex';\r\n\r\n/**\r\n * @class ShowMore\r\n */\r\nexport default class ShowMore {\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param {HTMLElement} className\r\n   * @param {Object} object\r\n   */\r\n  constructor(className, { onMoreLess = () => {}, regex = {}, config } = {}) {\r\n    // all html elements\r\n    const elements = document.querySelectorAll(className);\r\n\r\n    // colback function\r\n    this.onMoreLess = onMoreLess;\r\n\r\n    // global regex\r\n    this.regex = Object.assign(defaultRegex, regex);\r\n\r\n    for (let i = 0; i < elements.length; i++) {\r\n      const {\r\n        type,\r\n        limit,\r\n        element,\r\n        after,\r\n        more,\r\n        less,\r\n        number,\r\n        ellipsis,\r\n        btnClass,\r\n        btnClassAppend,\r\n      } = JSON.parse(elements[i].getAttribute('data-config')) || config;\r\n\r\n      // create global object\r\n      this.object = {\r\n        index: i,\r\n        element: elements[i],\r\n        type,\r\n        limit,\r\n        classArray: elements[i].classList,\r\n        ellipsis,\r\n        typeElement: element || 'span',\r\n        more: more || false,\r\n        less: less || false,\r\n        number: number || false,\r\n        after: after || 0,\r\n        btnClass: btnClass || 'show-more-btn',\r\n        btnClassAppend: btnClassAppend || null,\r\n      };\r\n\r\n      this.initial(this.object);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initail function\r\n   *\r\n   * @param {Object} object\r\n   */\r\n  initial({ element, after, ellipsis, limit, type }) {\r\n    // set default aria-expande to false\r\n    element.setAttribute('aria-expanded', 'false');\r\n\r\n    const limitCounts = limit + after;\r\n    const ellips = ellipsis === false ? '' : '...';\r\n\r\n    // text\r\n    if (type === 'text') {\r\n      let truncatedText = '';\r\n      const originalText = element.innerHTML.trim();\r\n      let elementText = element.textContent.trim();\r\n\r\n      let orgTexReg = originalText;\r\n      for (let key in this.regex) {\r\n        const { match, replace } = this.regex[key];\r\n        if (key && match) orgTexReg = orgTexReg.replace(match, replace);\r\n      }\r\n\r\n      if (elementText.length > limitCounts) {\r\n        truncatedText = htmlSubstr(orgTexReg, limit).concat(ellips);\r\n\r\n        element.innerHTML = truncatedText;\r\n\r\n        this.addBtn(this.object);\r\n\r\n        this.clickEvent(element, {\r\n          ...this.object,\r\n          originalText,\r\n          truncatedText,\r\n        });\r\n      }\r\n    }\r\n\r\n    // list and table\r\n    if (type === 'list' || type === 'table') {\r\n      const items =\r\n        type === 'list' ? [].slice.call(element.children) : element.rows;\r\n\r\n      if (items.length > limitCounts) {\r\n        for (let i = limit; i < items.length; i++) {\r\n          addRemoveClass(items[i], true);\r\n        }\r\n\r\n        // add button to the list and table\r\n        this.addBtn(this.object);\r\n\r\n        // add event click\r\n        this.clickEvent(\r\n          type === 'list' ? element : element.nextElementSibling,\r\n          this.object\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event click\r\n   *\r\n   * @param {HTMLElement} element\r\n   * @param {Object} object\r\n   */\r\n  clickEvent(element, object) {\r\n    element.addEventListener('click', this.handleEvent.bind(this, object));\r\n  }\r\n\r\n  /**\r\n   * Create button\r\n   *\r\n   * @param {Object} object\r\n   * @returns HTMLElement\r\n   */\r\n  createBtn({ element, number, less, more, type, btnClass, btnClassAppend }) {\r\n    const typeAria = this.checkExp ? less || '' : more || '';\r\n    const label = this.checkExp ? 'collapse' : 'expand';\r\n    const expanded = this.checkExp ? true : false;\r\n\r\n    const btn = document.createElement('button');\r\n    btn.className =\r\n      btnClassAppend == null ? btnClass : btnClass + ' ' + btnClassAppend;\r\n    btn.setAttribute('aria-expanded', expanded);\r\n    btn.setAttribute('aria-label', label);\r\n    btn.setAttribute('tabindex', 0);\r\n    btn.innerHTML = number ? typeAria + getNumber(element, type) : typeAria;\r\n    return btn;\r\n  }\r\n\r\n  /**\r\n   * Event handler\r\n   *\r\n   * @param {Object} object\r\n   * @param {Event} event\r\n   */\r\n  handleEvent(object, { currentTarget, target }) {\r\n    const {\r\n      element,\r\n      type,\r\n      limit,\r\n      less,\r\n      typeElement,\r\n      originalText,\r\n      truncatedText,\r\n      btnClass,\r\n    } = object;\r\n\r\n    // check if the button is clicked\r\n    const checkContainsClass = target.classList.contains(btnClass);\r\n\r\n    if (!checkContainsClass) return;\r\n\r\n    const ariaExpanded = element.getAttribute('aria-expanded');\r\n    console.log(ariaExpanded);\r\n    this.checkExp = ariaExpanded === 'false';\r\n\r\n    // --------------------------------------------------\r\n    // text\r\n    if (type === 'text' && checkContainsClass) {\r\n      element.innerHTML = '';\r\n      element.innerHTML = this.checkExp ? originalText : truncatedText;\r\n\r\n      if (less) {\r\n        const el = document.createElement(typeElement);\r\n        el.insertAdjacentElement('beforeend', this.createBtn(object));\r\n        element.appendChild(el);\r\n      }\r\n    }\r\n\r\n    // --------------------------------------------------\r\n    // list and table\r\n    if (type === 'list' || type === 'table') {\r\n      const items =\r\n        type === 'list' ? [].slice.call(currentTarget.children) : element.rows;\r\n\r\n      for (let i = 0; i < items.length; i++) {\r\n        const typeRemove =\r\n          type === 'list' ? i >= limit && i < items.length - 1 : i >= limit;\r\n\r\n        if (ariaExpanded === 'false') {\r\n          addRemoveClass(items[i]);\r\n        } else if (typeRemove) {\r\n          addRemoveClass(items[i], true);\r\n        }\r\n      }\r\n    }\r\n\r\n    // set aria-expanded\r\n    if (type === 'table' || type === 'list' || type === 'text') {\r\n      this.setExpand({ ...object, target });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add button\r\n   *\r\n   * @param {Object} object\r\n   */\r\n  addBtn(object) {\r\n    const { type, element, more, typeElement } = object;\r\n\r\n    if (!more) return;\r\n\r\n    if (type === 'table') {\r\n      element.insertAdjacentElement('afterend', this.createBtn(object));\r\n    } else {\r\n      const el = document.createElement(typeElement);\r\n      el.appendChild(this.createBtn(object));\r\n      element.appendChild(el);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set aria-expanded\r\n   *\r\n   * @param {Object} object\r\n   */\r\n  setExpand(object) {\r\n    const { element, type, less, more, number, target } = object;\r\n\r\n    const check = this.checkExp;\r\n\r\n    const typeAria = check ? less : more;\r\n    const aria = check ? 'expand' : 'collapse';\r\n    const ariaText = type === 'table' ? type : `the ${type}`;\r\n    const lastChild = element.lastElementChild;\r\n\r\n    element.setAttribute('aria-expanded', check);\r\n    target.setAttribute('aria-expanded', check);\r\n    target.setAttribute('aria-label', `${aria} ${ariaText}`);\r\n\r\n    // callback function on more/less\r\n    this.onMoreLess(aria, object);\r\n\r\n    if (typeAria) {\r\n      target.innerHTML = number\r\n        ? typeAria + getNumber(element, type)\r\n        : typeAria;\r\n    } else if (type === 'table') {\r\n      target.parentNode.removeChild(target);\r\n    } else if (type === 'list') {\r\n      lastChild.parentNode.removeChild(lastChild);\r\n    }\r\n  }\r\n}\r\n"],"names":["getNumber","type","rows","children","elementType","numbersElementHidden","slice","call","filter","el","className","length","htmlSubstr","originalText","count","div","document","createElement","innerHTML","walk","track","len","data","substringData","fn","node","firstChild","nodeType","childNodes","nextSibling","addRemoveClass","element","classList","defaultRegex","newLine","match","replace","space","br","html","ShowMore","constructor","onMoreLess","regex","config","elements","querySelectorAll","Object","assign","i","limit","after","more","less","number","ellipsis","btnClass","btnClassAppend","JSON","parse","getAttribute","object","index","classArray","typeElement","initial","setAttribute","limitCounts","ellips","truncatedText","trim","elementText","textContent","orgTexReg","key","concat","addBtn","clickEvent","items","nextElementSibling","addEventListener","handleEvent","bind","createBtn","typeAria","checkExp","label","expanded","btn","currentTarget","target","checkContainsClass","contains","ariaExpanded","console","log","insertAdjacentElement","appendChild","typeRemove","setExpand","check","aria","ariaText","lastChild","lastElementChild","parentNode","removeChild"],"mappings":"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"}