var ShowMore=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.className=".".concat(e.class),this.typeElement=e.show.type||"span",this.showMore=' <span class="showMore">'.concat(e.show.more,"</span>"),this.showLess=' <span class="showLess">'.concat(e.show.less,"</span>"),this.regex=/(\r\n|\n|\r)/gm,this.render()}var n,s,r;return n=t,(s=[{key:"render",value:function(){for(var e=document.querySelectorAll(this.className),t=0;t<e.length;t++){var n=e[t].getAttribute("data-number"),s=e[t].getAttribute("data-type");this.init(s,e[t],+n)}}},{key:"init",value:function(e,t,n){if("text"===e){var s=t.innerHTML,r="",i=s.replace(this.regex," ").length-t.innerText.replace(this.regex," ").length;if(s.length>n){r=(r=s.substr(0,n+i)).substr(0,Math.min(r.length,r.lastIndexOf(" "))),t.innerHTML=r;var a=this.createElement(this.typeElement);this.insertHTML(a,this.showMore),t.appendChild(a),this.appendControls({type:e,element:t,originalText:s,truncatedText:r})}}if("list"===e){var l=[].slice.call(t.children);if(l.length>n){for(var o=n;o<l.length;o++)l[o].classList.add("hidden");var h=this.createElement(this.typeElement);this.insertHTML(h,this.showMore),t.appendChild(h),this.appendControls({type:e,element:t,limit:n})}}if("table"===e){var c=t.tBodies[0].rows;if(c.length>n){for(var d=n;d<c.length;d++)c[d].classList.add("hidden");var p=this.createElement("tfoot"),u=this.createElement("tr"),f=this.createElement("td");p.appendChild(u),f.colSpan=this.getTableColumnCount(t),u.appendChild(f),this.insertHTML(f,this.showMore),t.appendChild(p)}this.appendControls({type:e,element:t,limit:n})}}},{key:"appendControls",value:function(e){var t=this,n=e.type,s=e.element,r=e.limit,i=e.originalText,a=e.truncatedText;s.addEventListener("click",(function(e){var l=e.currentTarget,o=e.target,h=o.className;if("text"===n&&("showMore"===h||"showLess"===h)){l.innerHTML="",l.innerHTML="showMore"===h?i:a.replace(t.regex," ");var c=document.createElement(t.typeElement);t.insertHTML(c,"showMore"===h?t.showLess:t.showMore),l.appendChild(c)}if("list"===n&&("showMore"===h||"showLess"===h)){s.classList.toggle("expanded");for(var d=l.classList.contains("expanded"),p=[].slice.call(l.children),u=0;u<p.length;u++)d?p[u].classList.remove("hidden"):u>=r&&u<p.length-1&&p[u].classList.add("hidden");var f=p[p.length-1];f.parentNode.removeChild(f);var m=t.createElement(t.typeElement);t.insertHTML(m,d?t.showLess:t.showMore),s.appendChild(m)}if("table"===n){var v=s.tBodies[0].rows,g=o.parentNode;if("showMore"===h){g.innerHTML="";for(var L=0;L<v.length;L++)v[L].classList.remove("hidden");t.insertHTML(g,t.showLess)}if("showLess"===h){g.innerHTML="";for(var w=r;w<v.length;w++)v[w].classList.add("hidden");t.insertHTML(g,t.showMore)}}}))}},{key:"insertHTML",value:function(e,t){return e.insertAdjacentHTML("beforeend",t)}},{key:"createElement",value:function(e){return document.createElement(e)}},{key:"getTableColumnCount",value:function(e){var t=0,n=e.rows;if(e.length>0)for(var s=n[0].cells,r=0,i=s.length;r<i;++r)t+=s[r].colSpan;return t}}])&&e(n.prototype,s),r&&e(n,r),t}()}();
