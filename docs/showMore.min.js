var ShowMore=function(){"use strict";function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(){function t(e,a){var n=a.type,r=a.more,s=a.less;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.className=e,this.typeElement=n||"span",this.more=r,this.less=s,this.showMore='<span class="show-more show-more-button" aria-label="expand" tabindex="0">'.concat(r,"</span>"),this.showLess='<span class="show-less show-more-button" aria-label="collapse" tabindex="0">'.concat(s,"</span>"),this.regex={newLine:/[^\x20-\x7E]/gm,space:/\s{2,}/gm,br:/<\s*\/?br\s*[/]?>/gm},this.render()}var a,n,r;return a=t,(n=[{key:"render",value:function(){for(var e=document.querySelectorAll(this.className),t=0;t<e.length;t++){var a=e[t].getAttribute("data-number"),n=e[t].getAttribute("data-after"),r=e[t].getAttribute("data-type");this.init(r,e[t],+a,+n)}}},{key:"init",value:function(e,t,a,n){t.setAttribute("aria-expanded","false");var r=a+n;if("text"===e){var s=t.innerHTML,i="",l=s.replace(this.regex.newLine,"").replace(this.regex.space," ").replace(this.regex.br,"").length-t.innerText.replace(this.regex.newLine,"").length;t.innerText.length>r&&(i=(i=s.replace(this.regex.newLine,"").replace(this.regex.space," ").replace(this.regex.br," ").substr(0,a+l)).substr(0,Math.min(i.length,i.lastIndexOf(" "))),t.innerHTML=i,this.appendControls({type:e,element:t,originalText:s,truncatedText:i}))}if("list"===e){var o=[].slice.call(t.children);if(o.length>r){for(var d=a;d<o.length;d++)o[d].classList.add("hidden");this.appendControls({type:e,element:t,limit:a})}}if("table"===e){var c=t.rows;if(c.length>r){for(var h=a;h<c.length;h++)c[h].classList.add("hidden");this.appendControls({type:e,element:t,limit:a})}}}},{key:"appendControls",value:function(e){var t,a=this,n=e.type,r=e.element,s=e.limit,i=e.originalText,l=e.truncatedText;if("table"===n)r.insertAdjacentHTML("afterend",this.showMore),t=r.nextElementSibling;else{var o=document.createElement(this.typeElement);o.innerHTML=this.showMore,r.appendChild(o),t=r}t.addEventListener("click",(function(e){var t=e.currentTarget,o=e.target,d="table"===n?t.previousElementSibling.getAttribute("aria-expanded"):t.getAttribute("aria-expanded");if("text"===n&&o.classList.contains("show-more-button")){r.innerHTML="",r.innerHTML="false"===d?i:l;var c=document.createElement(a.typeElement);c.insertAdjacentHTML("beforeend","false"===d?a.showLess:a.showMore),"true"===d?a.dataExpanded(r,o,a.more,n,!1):a.dataExpanded(r,o,a.less,n,!0),r.appendChild(c)}if("list"===n&&o.classList.contains("show-more-button"))for(var h=[].slice.call(t.children),p=0;p<h.length;p++)"false"===d&&(h[p].classList.remove("hidden"),a.dataExpanded(r,o,a.less,n,!0)),"true"===d&&p>=s&&p<h.length-1&&(h[p].classList.add("hidden"),a.dataExpanded(r,o,a.more,n,!1));if("table"===n){var u=r.rows;if("false"===d){for(var f=0;f<u.length;f++)u[f].classList.remove("hidden");a.dataExpanded(r,o,a.less,n,!0)}else{for(var m=s;m<u.length;m++)u[m].classList.add("hidden");a.dataExpanded(r,o,a.more,n,!1)}}}))}},{key:"dataExpanded",value:function(e,t,a,n,r){var s="table"===n?n:"the ".concat(n),i=r?"collapse":"expand";e.setAttribute("aria-expanded",r),t.innerHTML=a,t.setAttribute("aria-label","".concat(i," ").concat(s))}}])&&e(a.prototype,n),r&&e(a,r),t}()}();
