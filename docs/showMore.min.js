var ShowMore=function(){"use strict";function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(){function t(e,i){var n=i.type,s=i.more,a=i.less,r=i.showNumber;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.className=e,this.typeElement=n||"span",this.more=s,this.less=a||!1,this.showNumber=r||!1,this.regex={newLine:/[^\x20-\x7E]/gm,space:/\s{2,}/gm,br:/<\s*\/?br\s*[/]?>/gm},this.initial()}var i,n,s;return i=t,(n=[{key:"initial",value:function(){for(var e=document.querySelectorAll(".".concat(this.className)),t=0;t<e.length;t++)this.limit=+e[t].getAttribute("data-number"),this.limitAfter=+e[t].getAttribute("data-after"),this.type=e[t].getAttribute("data-type"),this.render(e[t])}},{key:"render",value:function(e){e.setAttribute("aria-expanded","false");var t=this.limit+this.limitAfter;if("text"===this.type){var i="",n=e.innerHTML,s=n.replace(this.regex.newLine,"").replace(this.regex.space," ").replace(this.regex.br,"").length-e.innerText.replace(this.regex.newLine,"").length;e.innerText.length>t&&(i=(i=n.replace(this.regex.newLine,"").replace(this.regex.space," ").replace(this.regex.br,"").substr(0,this.limit+s)).substr(0,Math.min(i.length,i.lastIndexOf(" "))),e.innerHTML=i,this.addButton(e),e.addEventListener("click",this.handleEvent.bind(this,{element:e,originalText:n,truncatedText:i})))}if("list"===this.type){var a=[].slice.call(e.children);if(a.length>t){for(var r=this.limit;r<a.length;r++)a[r].classList.add("hidden");this.addButton(e),e.addEventListener("click",this.handleEvent.bind(this,{element:e}))}}if("table"===this.type){var l=e.rows;if(l.length>t){for(var h=this.limit;h<l.length;h++)l[h].classList.add("hidden");e.insertAdjacentElement("afterend",this.createButton("more","collapse",e)),e.nextElementSibling.addEventListener("click",this.handleEvent.bind(this,{element:e}))}}}},{key:"createButton",value:function(e,t,i){var n="collapse"===t?this.more:this.less,s=document.createElement("span");return s.className="show-".concat(e," show-more-button"),s.setAttribute("aria-label",t),s.setAttribute("tabindex",0),s.innerHTML=this.showNumber?n+this.getNumber(i):n,s}},{key:"handleEvent",value:function(e,t){var i=e.element,n=e.originalText,s=e.truncatedText,a=t.currentTarget,r=t.target,l=i.getAttribute("aria-expanded");if(this.logic="false"===l,"text"===this.type&&r.classList.contains("show-more-button")){i.innerHTML="",i.innerHTML="false"===l?n:s;var h="false"===l?this.createButton("less","expand",i):this.createButton("more","collapse",i),c=document.createElement(this.typeElement);c.insertAdjacentElement("beforeend",h),this.setExpand(i,r),i.appendChild(c)}if("list"===this.type&&r.classList.contains("show-more-button")){for(var o=[].slice.call(a.children),d=0;d<o.length;d++)"false"===l&&o[d].classList.remove("hidden"),"true"===l&&d>=this.limit&&d<o.length-1&&o[d].classList.add("hidden");this.setExpand(i,r)}if("table"===this.type){var u=i.rows;if("false"===l)for(var m=0;m<u.length;m++)u[m].classList.remove("hidden");else for(var p=this.limit;p<u.length;p++)u[p].classList.add("hidden");this.setExpand(i,r)}}},{key:"addButton",value:function(e){var t=document.createElement(this.typeElement);t.appendChild(this.createButton("more","collapse",e)),e.appendChild(t)}},{key:"getNumber",value:function(e){var t="table"===this.type?e.rows:e.children,i=[].slice.call(t).filter((function(e){return"hidden"===e.className})).length;return 0!==i?" ".concat(i):""}},{key:"setExpand",value:function(e,t){var i=this.logic?this.less:this.more,n="table"===this.type?this.type:"the ".concat(this.type),s=this.logic?"collapse":"expand",a=e.lastElementChild;e.setAttribute("aria-expanded",this.logic),t.setAttribute("aria-label","".concat(s," ").concat(n)),i?t.innerHTML=this.showNumber?i+this.getNumber(e):i:("table"===this.type&&t.parentNode.removeChild(t),"list"===this.type&&a.parentNode.removeChild(a))}}])&&e(i.prototype,n),s&&e(i,s),t}()}();
