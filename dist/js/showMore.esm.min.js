const t=(t,e)=>{let{rows:n,children:s}=t;const i="table"===e?n:s,l=[].slice.call(i).filter((t=>t.classList.contains("hidden"))).length;return 0!==l?` ${l}`:""},e=function(t,e){return void 0===e&&(e=!1),t.classList[e?"add":"remove"]("hidden")},n=(t,e)=>{for(let n in e)t.setAttribute(n,e[n])},s=t=>document.createElement(t),i={newLine:{match:/(\r\n|\n|\r)/gm,replace:""},space:{match:/\s\s+/gm,replace:" "},br:{match:/<br\s*\/?>/gim,replace:""},html:{match:/(<((?!b|\/b|!strong|\/strong)[^>]+)>)/gi,replace:""}},l={typeElement:"span",more:!1,less:!1,number:!1,nobutton:!1,after:0,btnClass:"show-more-btn",btnClassAppend:null};class a{constructor(t,e){let{onMoreLess:n=(()=>{}),regex:s={},config:a}=void 0===e?{}:e;const r=[].slice.call(document.querySelectorAll(t));this.t=n,this.i={...i,...s},r.map(((t,e)=>{const n=JSON.parse(t.getAttribute("data-config")),s={...a,...n};this.l={index:e,classArray:t.classList,...l,...s,typeElement:s.element||"span",element:t},this.o()}))}o=()=>{const{element:t,after:i,ellipsis:l,nobutton:a,limit:r,type:o}=this.l;n(t,{"aria-expanded":"false"});const c=r+i,h=!1===l?"":"...";if("text"===o){const e=t.innerHTML.trim();if(t.textContent.trim().length>c){let n=e;for(let t in this.i){const{match:e,replace:s}=this.i[t];t&&e&&(n=n.replace(e,s))}const i=((t,e)=>{let n=s("div");return n.insertAdjacentHTML("afterbegin",t),function t(e,n){let s=e.firstChild;do{3===s.nodeType?n(s):1===s.nodeType&&s.childNodes&&s.childNodes[0]&&t(s,n)}while(s=s.nextSibling)}(n,(function(t){if(e>0){let n=t.data.length;(e-=n)<=0&&(t.data=t.substringData(0,t.data.length+e))}else t.data=""})),n.innerHTML})(n,r-1).concat(h);if(t.textContent="",t.insertAdjacentHTML("beforeend",i),this.h(t,{...this.l,originalText:e,truncatedText:i}),a)return;this.p(this.l)}}if("list"===o||"table"===o){const n=this.m(t,o);if(n.length>c){for(let t=r;t<n.length;t++)e(n[t],!0);if(a||this.p(this.l),this.h("list"===o?t:t.nextElementSibling,this.l),a)return}}};h=(t,e)=>t.addEventListener("click",this.u.bind(this,e));g=e=>{let{element:i,number:l,less:a,more:r,type:o,btnClass:c,btnClassAppend:h}=e;const d=this._?a||"":r||"",p=this._?"collapse":"expand",m=!!this._,f=s("button");return f.className=null==h?c:c+" "+h,f.type="button",n(f,{"aria-expanded":m,"aria-label":p,tabindex:0}),f.insertAdjacentHTML("beforeend",l?d+t(i,o):d),f};u=(t,n)=>{let{target:i}=n;const{element:l,type:a,limit:r,less:o,typeElement:c,originalText:h,truncatedText:d,btnClass:p}=t,m=i.classList.contains(p);if(!m)return;const f=l.getAttribute("aria-expanded");if(this._="false"===f,"text"===a&&m&&(l.textContent="",l.insertAdjacentHTML("beforeend",this._?h:d),o)){const e=s(c);e.classList.add("show-more-wrapper"),e.insertAdjacentElement("beforeend",this.g(t)),l.appendChild(e)}if("list"===a||"table"===a){const t=this.m(l,a);for(let n=0;n<t.length;n++){const s="list"===a?n>=r&&n<t.length-1:n>=r;"false"===f?e(t[n]):s&&e(t[n],!0)}}a&&this.C({...t,target:i})};m=(t,e)=>"list"===e?[].slice.call(t.children):t.rows;p=t=>{const{type:e,element:n,more:i,typeElement:l}=t;if(i)if("table"===e)n.insertAdjacentElement("afterend",this.g(t));else{const e=s(l);e.classList.add("show-more-wrapper"),e.appendChild(this.g(t)),n.appendChild(e)}};C=e=>{const{element:s,type:i,less:l,more:a,number:r,target:o}=e,c=this._?l:a,h=this._?"expand":"collapse",d="table"===i?i:`the ${i}`,p=s.lastElementChild;n(s,{"aria-expanded":this._}),n(o,{"aria-expanded":this._,"aria-label":`${h} ${d}`}),this.t(h,e),c?o.innerHTML=r?c+t(s,i):c:"table"===i?o.parentNode.removeChild(o):"list"===i&&p.parentNode.removeChild(p)}}export{a as default};
