var ShowMore=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function i(e){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?n(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}return function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements=document.querySelectorAll(e),this.regex={newLine:/[^\x20-\x7E]/gm,space:/\s{2,}/gm,br:/<\s*\/?br\s*[/]?>/gm},this.initial()}var n,r,a;return n=t,(r=[{key:"initial",value:function(){for(var e=0;e<this.elements.length;e++){var t=JSON.parse(this.elements[e].getAttribute("data-config")),n=t.type,i=t.limit,r=t.element,a=t.after,s=t.more,l=t.less,c=t.number;this.type=n,this.limit=+i,this.typeElement=r||"span",this.more=s,this.less=l||!1,this.number=c||!1,this.after=+a||0,this.render(this.elements[e])}}},{key:"render",value:function(e){e.setAttribute("aria-expanded","false");var t=this.limit+this.after,n={element:e,type:this.type,limit:this.limit,typeElement:this.typeElement,less:this.less,more:this.more,number:this.number};if("text"===this.type){var r="",a=e.innerHTML,s=a.replace(this.regex.newLine,"").replace(this.regex.space," ").replace(this.regex.br,"").length-e.innerText.replace(this.regex.newLine,"").length;e.innerText.length>t&&(r=(r=a.replace(this.regex.newLine,"").replace(this.regex.space," ").replace(this.regex.br,"").substr(0,this.limit+s)).substr(0,Math.min(r.length,r.lastIndexOf(" "))),e.innerHTML=r,this.addButton(i(i({},n),{},{element:e})),e.addEventListener("click",this.handleEvent.bind(this,i(i({},n),{},{originalText:a,truncatedText:r}))))}if("list"===this.type){var l=[].slice.call(e.children);if(l.length>t){for(var c=this.limit;c<l.length;c++)l[c].classList.add("hidden");this.addButton(i(i({},n),{},{element:e})),e.addEventListener("click",this.handleEvent.bind(this,n))}}if("table"===this.type){var o=e.rows;if(o.length>t){for(var h=this.limit;h<o.length;h++)o[h].classList.add("hidden");e.insertAdjacentElement("afterend",this.createButton(i(i({},n),{},{elementClass:"more",aria:"collapse",element:e}))),e.nextElementSibling.addEventListener("click",this.handleEvent.bind(this,n))}}}},{key:"createButton",value:function(e){var t=e.elementClass,n=e.type,i=e.aria,r=e.more,a=e.less,s=e.element,l=e.number,c="collapse"===i?r:a,o=document.createElement("span");return o.className="show-".concat(t," show-more-button"),o.setAttribute("aria-label",i),o.setAttribute("tabindex",0),o.innerHTML=l?c+this.getNumber(s,n):c,o}},{key:"handleEvent",value:function(e,t){var n=e.element,r=e.type,a=e.limit,s=e.typeElement,l=e.originalText,c=e.truncatedText,o=t.currentTarget,h=t.target,d=n.getAttribute("aria-expanded");if(this.logic="false"===d,"text"===r&&h.classList.contains("show-more-button")){n.innerHTML="",n.innerHTML="false"===d?l:c;var u="false"===d?this.createButton(i(i({},e),{},{elementClass:"less",aria:"expand",element:n})):this.createButton(i(i({},e),{},{elementClass:"more",aria:"collapse",element:n})),m=document.createElement(s);m.insertAdjacentElement("beforeend",u),this.setExpand(i(i({},e),{},{target:h})),n.appendChild(m)}if("list"===r&&h.classList.contains("show-more-button")){for(var p=[].slice.call(o.children),f=0;f<p.length;f++)"false"===d&&p[f].classList.remove("hidden"),"true"===d&&f>=a&&f<p.length-1&&p[f].classList.add("hidden");this.setExpand(i(i({},e),{},{target:h}))}if("table"===r){var b=n.rows;if("false"===d)for(var g=0;g<b.length;g++)b[g].classList.remove("hidden");else for(var v=a;v<b.length;v++)b[v].classList.add("hidden");this.setExpand(i(i({},e),{},{target:h}))}}},{key:"addButton",value:function(e){var t=e.element,n=e.typeElement,r=document.createElement(n);r.appendChild(this.createButton(i(i({},e),{},{elementClass:"more",aria:"collapse",element:t}))),t.appendChild(r)}},{key:"getNumber",value:function(e,t){var n="table"===t?e.rows:e.children,i=[].slice.call(n).filter((function(e){return"hidden"===e.className})).length;return 0!==i?" ".concat(i):""}},{key:"setExpand",value:function(e){var t=e.element,n=e.type,i=e.less,r=e.more,a=e.number,s=e.target,l=this.logic?i:r,c="table"===this.type?this.type:"the ".concat(this.type),o=this.logic?"collapse":"expand",h=t.lastElementChild;t.getAttribute("aria-expanded"),t.setAttribute("aria-expanded",this.logic),s.setAttribute("aria-label","".concat(o," ").concat(c)),l?s.innerHTML=a?l+this.getNumber(t,n):l:("table"===this.type&&s.parentNode.removeChild(s),"list"===this.type&&h.parentNode.removeChild(h))}}])&&e(n.prototype,r),a&&e(n,a),t}()}();
